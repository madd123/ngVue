<!DOCTYPE html>
<html lang="en" ng-app="myapp">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="https://cdn.bootcss.com/angular.js/1.4.0/angular.min.js"></script>
    <script src="https://cdn.bootcss.com/angular.js/1.4.0/angular-route.min.js"></script>
    <link rel="stylesheet" href="../stylesheets/ycStyle/course.css">
    <title>course</title>
</head>

<body  ng-controller="Aaa">
    <div id="placegolder"></div>
    <div id="main">
        <div class="sidebar">
            <div class="course-nav">
                <div class="main-sponsor">
                    <span>赞助者</span>
                    <img src="../images/docs/becomeit.png" alt="">
                </div>
                <a class="become-backer" href="/support-vuejs">
                    成为赞助者
                </a>
                <h2>教程
                    <select name="" id="">
                        <option value="" selected>2.x</option>
                        <option value="">1.0</option>
                    </select>
                </h2>
                
                <ul class="menu-root">
                    <li><h3>基础</h3></li>
                    <li><a href="" class="sidebar-link">安装</a></li>
                    <li><a href="" class="sidebar-link">介绍</a></li>
                    <li><a href="" class="sidebar-link">Vue实例</a></li>
                    <li><a href="" class="sidebar-link">模板语法</a></li>
                    <li><a href="" class="sidebar-link">计算属性和观察者</a></li>
                    <li><a href="" class="sidebar-link">Class与Style绑定</a></li>
                    <li><a href="" class="sidebar-link">条件渲染</a></li>
                    <li><a href="" class="sidebar-link">列表渲染</a></li>
                    <li><a href="" class="sidebar-link">事件处理</a></li>
                    <li><a href="" class="sidebar-link">表单输入绑定</a></li>
                    <li><a href="" class="sidebar-link">组件</a></li>
                    <li><h3>过渡 & 动画</h3></li>
                    <li><a href="" class="sidebar-link">进入/离开 & 列表过渡</a></li>
                    <li><a href="" class="sidebar-link">状态过渡</a></li>
                    <li><h3>可复用性 & 组合</h3></li>
                    <li><a href="" class="sidebar-link">混合</a></li>
                    <li><a href="" class="sidebar-link">自定义指令</a></li>
                    <li><a href="" class="sidebar-link">渲染函数 & JSX</a></li>
                    <li><a href="" class="sidebar-link">插件</a></li>
                    <li><a href="" class="sidebar-link">过滤器</a></li>
                    <li><h3>工具</h3></li>
                    <li><a href="" class="sidebar-link">生产环境部署</a></li>
                    <li><a href="" class="sidebar-link">单文件组件</a></li>
                    <li><a href="" class="sidebar-link">单元测试</a></li>
                    <li><a href="" class="sidebar-link">Typescript支持</a></li>
                    <li><h3>规模化</h3></li>
                    <li><a href="#/router" class="sidebar-link">路由</a>
                        <ul id="router" ng-controller="router"><li ng-repeat="title in datalist"><a href="" ng-click="gotoAnchor(title)">{{title}}</a></li></ul>
                    </li>
                    <li><a href="#/state-management" class="sidebar-link">状态管理</a>
                        <ul id="stateManagement" ng-controller="stateManagement"><li ng-repeat="title in datalist"><a href="" ng-click="gotoAnchor(title)">{{title}}</a></li></ul>                        
                    </li>
                    <li><a href="#/ssr" class="sidebar-link">服务器端渲染</a>
                        <ul id="ssr" ng-controller="ssr"><li ng-repeat="title in datalist"><a href="" ng-click="gotoAnchor(title)">{{title}}</a></li></ul>
                    </li>
                    <li><h3>内在</h3></li>
                    <li><a href="" class="sidebar-link">深入响应式原理</a></li>
                    <li><h3>迁移</h3></li>
                    <li><a href="" class="sidebar-link">从Vue1.x迁移</a></li>
                    <li><a href="" class="sidebar-link">从Vue Router0.7.x迁移</a></li>
                    <li><a href="" class="sidebar-link">从Vuex 0.6.x迁移1.0</a></li>
                    <li><h3>更多</h3></li>
                    <li><a href="" class="sidebar-link">对比其他框架</a></li>
                    <li><a href="" class="sidebar-link">加入Vue.js社区</a></li>
                    <li><a href="" class="sidebar-link">认识团队</a></li>
                </ul>
            </div>
        </div>

        <div ng-view>
        </div>

    </div>
    <script src="https://cdn.bootcss.com/jquery/1.12.4/jquery.min.js"></script>
    <script>
        var router = `<div class="content route-guide">
                            <h1>路由</h1>
                            <a href="" ng-click="gotoAnchor('官方路由')">
                                <h2 id="官方路由">官方路由</h2>
                            </a>
                            <p>对于大多数单页面应用，都推荐使用官方支持的 <a href="https://github.com/vuejs/vue-router" target="_blank" rel="external">vue-router 库</a>。更多细节可以看
                                <a href="https://router.vuejs.org/" target="_blank" rel="external">vue-router 文档</a>。</p>
                            <a href="" ng-click="gotoAnchor('从零开始简单的路由')">
                                <h2 id="从零开始简单的路由">从零开始简单的路由</h2>
                            </a>
                            <p>如果只需要非常简单的路由而不需要引入整个路由库，可以动态渲染一个页面级的组件像这样：</p>
                            <figure class="highlight js">
                                <pre><div class="line"><span class="keyword">const</span> NotFound = { <span class="attr">template</span>: <span class="string">'&lt;p&gt;Page not found&lt;/p&gt;'</span> }</div><div class="line"><span class="keyword">const</span> Home = { <span class="attr">template</span>: <span class="string">'&lt;p&gt;home page&lt;/p&gt;'</span> }</div><div class="line"><span class="keyword">const</span> About = { <span class="attr">template</span>: <span class="string">'&lt;p&gt;about page&lt;/p&gt;'</span> }</div><div class="line"></div><div class="line"><span class="keyword">const</span> routes = {</div><div class="line">  <span class="string">'/'</span>: Home,</div><div class="line">  <span class="string">'/about'</span>: About</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">new</span> Vue({</div><div class="line">  <span class="attr">el</span>: <span class="string">'#app'</span>,</div><div class="line">  <span class="attr">data</span>: {</div><div class="line">    <span class="attr">currentRoute</span>: <span class="built_in">window</span>.location.pathname</div><div class="line">  },</div><div class="line">  <span class="attr">computed</span>: {</div><div class="line">    ViewComponent () {</div><div class="line">      <span class="keyword">return</span> routes[<span class="keyword">this</span>.currentRoute] || NotFound</div><div class="line">    }</div><div class="line">  },</div><div class="line">  render (h) { <span class="keyword">return</span> h(<span class="keyword">this</span>.ViewComponent) }</div><div class="line">})</div></pre>
                            </figure>
                            <p>结合 HTML5 History API，你可以建立一个非常基本但功能齐全的客户端路由器。可以直接看<a href="https://github.com/chrisvfritz/vue-2.0-simple-routing-example"
                                    target="_blank" rel="external">实例应用</a></p>
                            <a href="" ng-click="gotoAnchor('整合第三方路由')">
                                <h2 id="整合第三方路由">整合第三方路由</h2>
                            </a>
                            <p>如果有非常喜欢的第三方路由，如 <a href="https://github.com/visionmedia/page.js" target="_blank" rel="external">Page.js</a> 或者
                                <a href="https://github.com/flatiron/director" target="_blank" rel="external">Director</a>，整合<a href="https://github.com/chrisvfritz/vue-2.0-simple-routing-example/compare/master...pagejs"
                                    target="_blank" rel="external">很简单</a>。这有个用了 Page.js 的<a href="https://github.com/chrisvfritz/vue-2.0-simple-routing-example/tree/pagejs"
                                    target="_blank" rel="external">复杂示例</a>。</p>

                            <div class="guide-links">
                                <span style="float: right;"><a href="#/state-management">状态管理</a> →</span>
                            </div>

                            <div class="footer">
                                <div class="bsa-cpc"></div>
                                发现错误？想参与编辑？
                                <a href="https://github.com/vuejs/cn.vuejs.org/blob/master/src/v2/guide/routing.md" target="_blank">
                                    在 Github 上编辑此页！
                                </a>
                            </div>
                        </div>
                    </div>`;
        var stateManagement = `<div class="content state-management-guide">
                        <h1>状态管理</h1>
                        <a href="" ng-click="gotoAnchor('类-Flux-状态管理的官方实现')"><h2 id="类-Flux-状态管理的官方实现">类 Flux 状态管理的官方实现</h2></a>
                        <p>由于多个状态分散的跨越在许多组件和交互间各个角落，大型应用复杂度也经常逐渐增长。为了解决这个问题，Vue 提供 <a href="https://github.com/vuejs/vuex" target="_blank" rel="external">vuex</a>：我们有受到 Elm 启发的状态管理库。vuex 甚至集成到 <a href="https://github.com/vuejs/vue-devtools" target="_blank" rel="external">vue-devtools</a>，无需配置即可访问时光旅行。</p>
                        <a href="" ng-click="gotoAnchor('React-的开发者请参考以下信息')"><h3 id="React-的开发者请参考以下信息">React 的开发者请参考以下信息</h3></a><p>如果你是来自 React 的开发者，你可能会对 Vuex 和 <a href="https://github.com/reactjs/redux" target="_blank" rel="external">Redux</a> 间的差异表示关注，Redux 是 React 生态环境中最流行的 Flux 实现。Redux 事实上无法感知视图层，所以它能够轻松的通过一些<a href="https://github.com/egoist/revue" target="_blank" rel="external">简单绑定</a>和 Vue 一起使用。Vuex 区别在于它是一个专门为 Vue 应用所设计。这使得它能够更好地和 Vue 进行整合，同时提供简洁的 API 和改善过的开发体验。</p>
                        <a href="" ng-click="gotoAnchor('简单状态管理起步使用')"><h2 id="简单状态管理起步使用">简单状态管理起步使用</h2></a><p>经常被忽略的是，Vue 应用中原始<code>数据</code>对象的实际来源 - 当访问数据对象时，一个 Vue 实例只是简单的代理访问。所以，如果你有一处需要被多个实例间共享的状态，可以简单地通过维护一份数据来实现共享：</p>
                        <figure class="highlight js"><table><tbody><tr><td class="code"><pre><div class="line"><span class="keyword">const</span> sourceOfTruth = {}</div><div class="line"></div><div class="line"><span class="keyword">const</span> vmA = <span class="keyword">new</span> Vue({</div><div class="line">  <span class="attr">data</span>: sourceOfTruth</div><div class="line">})</div><div class="line"></div><div class="line"><span class="keyword">const</span> vmB = <span class="keyword">new</span> Vue({</div><div class="line">  <span class="attr">data</span>: sourceOfTruth</div><div class="line">})</div></pre></td></tr></tbody></table></figure>
                        <p>现在当 <code>sourceOfTruth</code> 发生变化，<code>vmA</code> 和 <code>vmB</code> 都将自动的更新引用它们的视图。子组件们的每个实例也会通过 <code>this.$root.$data</code> 去访问。现在我们有了唯一的实际来源，但是，调试将会变为噩梦。任何时间，我们应用中的任何部分，在任何数据改变后，都不会留下变更过的记录。</p>
                        <p>为了解决这个问题，我们采用一个简单的 <strong>store 模式</strong>：</p>
                        <figure class="highlight js"><table><tbody><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> store = {</div><div class="line">  <span class="attr">debug</span>: <span class="literal">true</span>,</div><div class="line">  <span class="attr">state</span>: {</div><div class="line">    <span class="attr">message</span>: <span class="string">'Hello!'</span></div><div class="line">  },</div><div class="line">  setMessageAction (newValue) {</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.debug) <span class="built_in">console</span>.log(<span class="string">'setMessageAction triggered with'</span>, newValue)</div><div class="line">    <span class="keyword">this</span>.state.message = newValue</div><div class="line">  },</div><div class="line">  clearMessageAction () {</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.debug) <span class="built_in">console</span>.log(<span class="string">'clearMessageAction triggered'</span>)</div><div class="line">    <span class="keyword">this</span>.state.message = <span class="string">''</span></div><div class="line">  }</div><div class="line">}</div></pre></td></tr></tbody></table></figure>
                        <p>需要注意，所有 store 中 state 的改变，都放置在 store 自身的 action 中去管理。这种集中式状态管理能够被更容易地理解哪种类型的 mutation 将会发生，以及它们是如何被触发。当错误出现时，我们现在也会有一个 log 记录 bug 之前发生了什么。</p>
                        <p>此外，每个实例/组件仍然可以拥有和管理自己的私有状态：</p>
                        <figure class="highlight js"><table><tbody><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> vmA = <span class="keyword">new</span> Vue({</div><div class="line">  <span class="attr">data</span>: {</div><div class="line">    <span class="attr">privateState</span>: {},</div><div class="line">    <span class="attr">sharedState</span>: store.state</div><div class="line">  }</div><div class="line">})</div><div class="line"></div><div class="line"><span class="keyword">var</span> vmB = <span class="keyword">new</span> Vue({</div><div class="line">  <span class="attr">data</span>: {</div><div class="line">    <span class="attr">privateState</span>: {},</div><div class="line">    <span class="attr">sharedState</span>: store.state</div><div class="line">  }</div><div class="line">})</div></pre></td></tr></tbody></table></figure>
                        <p><img src="../images/state.png" alt="状态管理"></p>
                        <p class="tip">重要的是，注意你不应该在 action 中 替换原始的状态对象 - 组件和 store 需要引用同一个共享对象，mutation 才能够被观察</p>
                        
                        <p>接着我们继续延伸约定，组件不允许直接修改属于 store 实例的 state，而应执行 action 来分发 (dispatch) 事件通知 store 去改变，我们最终达成了 <a href="https://facebook.github.io/flux/" target="_blank" rel="external">Flux</a> 架构。这样约定的好处是，我们能够记录所有 store 中发生的 state 改变，同时实现能做到记录变更 (mutation)、保存状态快照、历史回滚/时光旅行的先进的调试工具。</p>
                        <p>说了一圈其实又回到了<a href="https://github.com/vuejs/vuex" target="_blank" rel="external">vuex</a>，如果你已经读到这儿，或许可以去尝试一下！</p>
                        
                        
                            <div class="guide-links">
                                <span>← <a href="#/routing">路由</a></span>
                                <span style="float: right;"><a href="#/ssr">服务端渲染</a> →</span>
                            </div>
                        
                        <div class="footer">
                        <div class="bsa-cpc"></div>
                            发现错误？想参与编辑？
                            <a href="https://github.com/vuejs/cn.vuejs.org/blob/master/src/v2/guide/state-management.md" target="_blank">
                            在 Github 上编辑此页！
                            </a>
                        </div>
                    </div>`;

        var ssr = `<div class="content ssr-guide">
                        <h1>服务端渲染</h1>
                    <a href="" ng-click="gotoAnchor('SSR-完全指南')"><h2 id="SSR-完全指南">SSR 完全指南</h2></a><p>在 2.3 发布后我们发布了一份完整的构建 Vue 服务端渲染应用的指南。这份指南非常深入，适合已经熟悉 Vue, webpack 和 Node.js 开发的开发者阅读。请移步 <a href="https://ssr.vuejs.org/zh/" target="_blank" rel="external">ssr.vuejs.org</a>。</p>
                    <a href="" ng-click="gotoAnchor('Nuxt-js')"><h2 id="Nuxt-js">Nuxt.js</h2></a>
                    <p>从头搭建一个服务端渲染的应用是相当复杂的。幸运的是，我们有一个优秀的社区项目 <a href="https://nuxtjs.org/" target="_blank" rel="external">Nuxt.js</a> 让这一切变得非常简单。Nuxt 是一个基于 Vue 生态的更高层的框架，为开发服务端渲染的 Vue 应用提供了极其便利的开发体验。更酷的是，你甚至可以用它来做为静态站生成器。推荐尝试。</p>
                    <div class="guide-links">
                        <span>← <a href="#/state-management">状态管理</a></span>
                    </div>
                    <div class="footer">
                    <div class="bsa-cpc"></div>
                        发现错误？想参与编辑？
                        <a href="https://github.com/vuejs/cn.vuejs.org/blob/master/src/v2/guide/ssr.md" target="_blank">
                        在 Github 上编辑此页！
                            </a>
                        </div>
                    </div>`;


        var m1 = angular.module('myapp',['ngRoute']);
        // 用angular.module()方法创建一个模块化，存入m1变量。

        m1.config(['$routeProvider',function($routeProvider){
            $routeProvider
            .when('/router',{
                template: router,
                controller:"router",
            }).when('/state-management',{
                template:stateManagement,
                controller:"stateManagement",
            }).when('/ssr',{
                template: ssr,
                controller:"ssr",
            }).otherwise({
                redirectTo: '/router',
            })
        }])


    m1.controller("Aaa",function($scope,$location, $anchorScroll){
        $scope.gotoAnchor=function(id){
            // $location.hash(id);
            // // 设置hash值
            $(".content h2").each(function(){
                if($(this).attr("id") == id){
                    $(".ng-scope").animate({"scrollTop":$(this).offset().top+"px"},500);
                }
            })
            $(".content h3").each(function(){
                if($(this).attr("id") == id){
                    $(".ng-scope").animate({"scrollTop":$(this).offset().top+"px"},500);
                }
            })
            // $anchorScroll();
            // 不写这个会出现小bug
        }
    })

    $(".sidebar-link").each(function(i){
        var that = this;
        $(this).click(function(){
            $(that).addClass("active").parent().siblings().children(".sidebar-link").removeClass("active");
            setTimeout(function(){
                changeTitle();
            },10)
        })
    })
    
    m1.controller("router",function($scope){
    var arr = [];
    // var arrid = [];
    router.match(/<h[23] id=".+">(.+)<\/h[23]>/g).forEach(function(item){
        arr.push(item.match(/>(.+)</)[1]);
        // arrid.push(item.match(/id="(.+)"/)[1])
    })
        $scope.datalist = arr;
        // $scope.arrid = arrid;
    })

    m1.controller("stateManagement",function($scope){
        var arr = [];
    // var arrid = [];
    stateManagement.match(/<h[23] id=".+">(.+)<\/h[23]>/g).forEach(function(item){
        arr.push(item.match(/>(.+)</)[1]);
        // arrid.push(item.match(/id="(.+)"/)[1])
    })
        $scope.datalist = arr;
        // $scope.arrid = arrid;
    })

    m1.controller("ssr",function($scope){
        var arr = [];
    // var arrid = [];
    ssr.match(/<h[23] id=".+">(.+)<\/h[23]>/g).forEach(function(item){
        arr.push(item.match(/>(.+)</)[1]);
        // arrid.push(item.match(/id="(.+)"/)[1])
    })
        $scope.datalist = arr;
        // $scope.arrid = arrid;
    })

function changeTitle(){
    var routerStr = location.href.split("#")[1];
    console.log(routerStr)
    if(routerStr == "/router"){
        $("#router").slideDown();
        $("#stateManagement").hide();
        $("#ssr").hide();
    }else if(routerStr == "/state-management"){
        $("#router").hide();
        $("#stateManagement").slideDown();
        $("#ssr").hide();
    }else if(routerStr == "/ssr"){
        $("#router").hide();
        $("#stateManagement").hide();
        $("#ssr").slideDown();
    }
}
changeTitle();
    </script>
</body>

</html>